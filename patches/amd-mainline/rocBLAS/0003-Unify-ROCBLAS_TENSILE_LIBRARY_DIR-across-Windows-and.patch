From 2cf1b3006ed1add07c61abda69752898457dbe04 Mon Sep 17 00:00:00 2001
From: Scott Todd <scott.todd0@gmail.com>
Date: Thu, 5 Jun 2025 17:51:14 -0700
Subject: [PATCH 3/5] Unify ROCBLAS_TENSILE_LIBRARY_DIR across Windows and
 Linux.

Splitting the structure leads to further complexity in all downstream projects and tooling.
---
 library/src/CMakeLists.txt | 6 +-----
 next-cmake/CMakeLists.txt  | 6 +-----
 2 files changed, 2 insertions(+), 10 deletions(-)

diff --git a/library/src/CMakeLists.txt b/library/src/CMakeLists.txt
index f4bdfb5f..e39c74cf 100644
--- a/library/src/CMakeLists.txt
+++ b/library/src/CMakeLists.txt
@@ -820,11 +820,7 @@ rocm_install_targets(
 )
 
 if( BUILD_WITH_TENSILE )
-  if (WIN32)
-    set( ROCBLAS_TENSILE_LIBRARY_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}/bin/rocblas" CACHE PATH "path to tensile library" )
-  else()
-    set( ROCBLAS_TENSILE_LIBRARY_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}${CMAKE_INSTALL_LIBDIR}/rocblas" CACHE PATH "path to tensile library" )
-  endif()
+  set( ROCBLAS_TENSILE_LIBRARY_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}${CMAKE_INSTALL_LIBDIR}/rocblas" CACHE PATH "path to tensile library" )
   # For ASAN package, Tensile library files(which are not shared libraries) are not required
   if( NOT ENABLE_ASAN_PACKAGING )
     if( BUILD_SHARED_LIBS )
diff --git a/next-cmake/CMakeLists.txt b/next-cmake/CMakeLists.txt
index 7437d97c..2ee3f0cc 100644
--- a/next-cmake/CMakeLists.txt
+++ b/next-cmake/CMakeLists.txt
@@ -55,11 +55,7 @@ if(ROCBLAS_ENABLE_CLIENT)
 endif()
 
 if(ROCBLAS_ENABLE_TENSILE)
-  if(WIN32)
-    set(ROCBLAS_TENSILE_INSTALL_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}rocblas/bin" CACHE PATH "Path to install tree tensile library")
-  else()
-    set(ROCBLAS_TENSILE_INSTALL_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}${CMAKE_INSTALL_LIBDIR}/rocblas/library" CACHE PATH "Path to tensile library")
-  endif()
+  set(ROCBLAS_TENSILE_INSTALL_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}${CMAKE_INSTALL_LIBDIR}/rocblas/library" CACHE PATH "Path to tensile library")
   set(ROCBLAS_TENSILE_SUBDIR_PATH "${CMAKE_CURRENT_SOURCE_DIR}/../../Tensile" CACHE STRING "Path to Tensile subdirectory")
 endif()
 set(ROCBLAS_CONFIG_DIR "\${CPACK_PACKAGING_INSTALL_PREFIX}/${CMAKE_INSTALL_LIBDIR}" CACHE PATH "Path placed into ldconfig file")
-- 
2.47.1.windows.2

