name: Demo - GitHub Actions Logging

# This workflow demonstrates GitHub Actions logging annotations
# It runs the sample_github_actions_logging.py script which uses:
# - github_info(): Creates blue info badges
# - github_warning(): Creates yellow warning annotations with file/line links
# - github_error(): Creates red error annotations with file/line links
# - github_group(): Creates collapsible log sections

on:
  # Manual trigger for demo purposes
  workflow_dispatch:
  
  # Auto-trigger on push to logging_poc branch (for testing)
  push:
    branches:
      - 'users/rponnuru/logging_poc'
    paths:
      - 'build_tools/_therock_utils/sample_github_actions_logging.py'
      - '.github/workflows/demo_github_actions_logging.yml'

permissions:
  contents: read

jobs:
  demo_github_actions_logging:
    name: GitHub Actions Logging Demo
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
      
      - name: Display Information
        run: |
          echo "=========================================="
          echo "  GitHub Actions Logging Demo"
          echo "=========================================="
          echo ""
          echo "This workflow demonstrates GitHub Actions annotations:"
          echo "- Info badges (blue)"
          echo "- Warning annotations (yellow) with file/line links"
          echo "- Error annotations (red) with file/line links"
          echo "- Collapsible log groups"
          echo ""
      
      - name: Run GitHub Actions Logging Demo
        run: |
          cd build_tools/_therock_utils
          python sample_github_actions_logging.py
        continue-on-error: true
      
      - name: Summary
        if: always()
        run: |
          echo ""
          echo "=========================================="
          echo "  Check Workflow Results"
          echo "=========================================="
          echo ""
          echo "Look for these in the GitHub Actions UI:"
          echo ""
          echo "1. Annotations Tab:"
          echo "   - Blue info badges for successful operations"
          echo "   - Yellow warning badges for non-critical issues"
          echo "   - Red error badges for failures"
          echo ""
          echo "2. Job Logs:"
          echo "   - Collapsible groups (üîç Environment Checks, üî® Building, etc.)"
          echo "   - Click to expand/collapse sections"
          echo ""
          echo "3. Files Changed Tab:"
          echo "   - Warning/error annotations appear next to code"
          echo "   - Linked to specific file:line numbers"
          echo ""

