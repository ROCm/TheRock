<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>TheRock Build Resource Observability Report</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }
    h1 { margin-bottom: 8px; }
    table { border-collapse: collapse; margin-top: 16px; }
    th { background: #f0f0f0; }
    th, td { padding: 8px 12px; text-align: center; }
  </style>
</head>
<body>
<h1>TheRock Build Resource Observability Report</h1>
<h2>Build Resource Utilization Summary</h2>
<table border='1' cellpadding='6' cellspacing='0'>
<thead><tr>
<th>component</th>
<th>wall_time_sum (minutes)</th>
<th>wall_time_span (minutes)</th>
<th>avg_concurrency</th>
<th>peak_concurrency</th>
<th>cpu_sum (minutes)</th>
<th>user_sum (minutes)</th>
<th>sys_sum (minutes)</th>
<th>avg_threads</th>
<th>max_rss_mb</th>
<th>max_rss_gb</th>
</tr></thead><tbody>
<tr>
<td>amd-llvm</td>
<td>1210.35</td>
<td>12.49</td>
<td>96.94</td>
<td>258</td>
<td>1198.76</td>
<td>1071.97</td>
<td>126.79</td>
<td>0.99</td>
<td>6663.41</td>
<td>6.5072</td>
</tr>
<tr>
<td>sysdeps</td>
<td>117.74</td>
<td>1.93</td>
<td>60.85</td>
<td>258</td>
<td>112.24</td>
<td>89.09</td>
<td>23.15</td>
<td>0.95</td>
<td>660.39</td>
<td>0.6449</td>
</tr>
<tr>
<td>host-blas</td>
<td>111.47</td>
<td>1.43</td>
<td>78.04</td>
<td>235</td>
<td>109.26</td>
<td>59.13</td>
<td>50.13</td>
<td>0.98</td>
<td>182.00</td>
<td>0.1777</td>
</tr>
<tr>
<td>unknown</td>
<td>36.14</td>
<td>1.87</td>
<td>19.34</td>
<td>219</td>
<td>35.51</td>
<td>28.94</td>
<td>6.57</td>
<td>0.98</td>
<td>726.08</td>
<td>0.7091</td>
</tr>
<tr>
<td>fftw3</td>
<td>3.19</td>
<td>0.17</td>
<td>18.66</td>
<td>170</td>
<td>3.06</td>
<td>1.96</td>
<td>1.10</td>
<td>0.96</td>
<td>70.28</td>
<td>0.0686</td>
</tr>
<tr>
<td>support</td>
<td>1.66</td>
<td>1.65</td>
<td>1.01</td>
<td>10</td>
<td>1.64</td>
<td>1.24</td>
<td>0.39</td>
<td>0.99</td>
<td>392.00</td>
<td>0.3828</td>
</tr>
<tr>
<td>base</td>
<td>1.11</td>
<td>1.70</td>
<td>0.65</td>
<td>11</td>
<td>1.09</td>
<td>0.86</td>
<td>0.23</td>
<td>0.99</td>
<td>386.00</td>
<td>0.3770</td>
</tr>
<tr>
<td>prim</td>
<td>0.83</td>
<td>0.18</td>
<td>4.70</td>
<td>6</td>
<td>0.82</td>
<td>0.64</td>
<td>0.18</td>
<td>0.99</td>
<td>372.00</td>
<td>0.3633</td>
</tr>
<tr>
<td>rand</td>
<td>0.43</td>
<td>1.63</td>
<td>0.26</td>
<td>13</td>
<td>0.42</td>
<td>0.27</td>
<td>0.15</td>
<td>0.98</td>
<td>186.00</td>
<td>0.1816</td>
</tr>
<tr>
<td>blas</td>
<td>0.08</td>
<td>0.04</td>
<td>1.78</td>
<td>4</td>
<td>0.05</td>
<td>0.05</td>
<td>0.01</td>
<td>0.69</td>
<td>42.00</td>
<td>0.0410</td>
</tr>
<tr>
<td>composable-kernel</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>core-hip</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>core-hipinfo</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>core-ocl</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>core-runtime</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>fft</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>hipdnn</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>hipify</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>host-suite-sparse</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>miopen</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>miopen-plugin</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>rccl</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>rdc</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>rocprofiler-compute</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>rocprofiler-sdk</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>rocprofiler-systems</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
<tr>
<td>rocwmma</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.00</td>
<td>0.0000</td>
</tr>
</tbody></table>
<hr />

<h2>General FAQ</h2>

<ol>
  <li><b>rss = Resident Set Size</b>
    <p>
      It means the amount of physical RAM actually in use by a process at its peak. High rss means memory-heavy compilation or linking.
      If rss is high across many parallel jobs, we can hit swapping, cache thrashing, OOM kills in CI. High rss often limits how much
      parallelism you can safely use (-j)
    </p>
  </li>

  <li><b>max_rss_mb</b>
    <p>
      the maximum RAM a compiler or linker process had allocated in memory at any point.
    </p>
  </li>

  <li><b>avg_concurrency vs peak_concurrency</b>
    <p>
      <b>avg_concurrency</b> measures <b>average parallelism across processes</b> for the component:
      <code>avg_concurrency ≈ wall_time_sum / wall_time_span</code>.
      This captures Ninja/CMake parallel builds even if each clang process is single-threaded.
    </p>
    <p>
      <b>peak_concurrency</b> measures the <b>maximum overlap</b> (max number of tool processes running at the same time) for that component.
    </p>
  </li>

  <li><b>What Avg Threads (avg_threads) actually mean ?</b>
    <p>
      <b>avg_threads</b> measures <b>parallelism within a process</b>:
      <code>avg_threads = cpu_sum / wall_time_sum</code>.
      clang compilation often stays near 1.0, while LTO/ThinLTO or some linkers can be &gt; 1.0.
    </p>
  </li>

  <li><b>What user_sum, sys_sum, cpu_sum mean ? (Note: all times are in minutes)</b>
    <p><b>user_sum</b> → time spent executing compiler/linker code.</p>
    <p><b>sys_sum</b> → time spent inside the OS kernel (I/O, filesystem, etc.).</p>
    <p><b>cpu_sum</b> → total CPU time = user_sum + sys_sum.</p>
  </li>
</ol>

<h3>Key mental model</h3>
<ul>
  <li><b>wall_time_sum</b> → total summed command wall time (inflates with parallelism)</li>
  <li><b>wall_time_span</b> → component elapsed window</li>
  <li><b>avg_concurrency</b> → average parallel tool processes for this component</li>
  <li><b>peak_concurrency</b> → maximum overlap of tool processes</li>
  <li><b>avg_threads</b> → CPU utilization ratio per component</li>
  <li><b>rss</b> → limits safe parallelism</li>
</ul>

</body>
</html>
