# Log Analyzer - Sequence Diagrams

## ğŸ”„ Detailed Sequence Diagram - Single File Analysis

```
User          CLI           LogAnalyzer    LLM Provider    FileSystem    Output
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                 â”‚              â”‚             â”‚            â”‚
 â”‚ Run command â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â”‚             â”‚            â”‚
 â”‚             â”‚ Initialize      â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚ (provider,model)â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚            â”‚
 â”‚             â”‚                 â”‚ Get API Key  â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ (from env)   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚            â”‚
 â”‚             â”‚                 â”‚ API Key      â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚            â”‚
 â”‚             â”‚                 â”‚ Initialize   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ LLM Client   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚            â”‚
 â”‚             â”‚                 â”‚ Client Ready â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚             â”‚            â”‚
 â”‚             â”‚ Analyzer Ready  â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â”‚             â”‚            â”‚
 â”‚             â”‚ parse_log_file  â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚ (log_path)      â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â”‚
 â”‚             â”‚                 â”‚              â”‚ Read file   â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
 â”‚             â”‚                 â”‚              â”‚ File contentâ”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Regex     â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Parsing   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Errors   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Warnings â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Traces   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Count    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚             â”‚            â”‚
 â”‚             â”‚ parsed_data{}   â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â”‚             â”‚            â”‚
 â”‚             â”‚ analyze_failure â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚ (log_data)      â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Create    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Prompt:   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Stats    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Errors   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Context  â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º             â”‚            â”‚
 â”‚             â”‚                 â”‚ invoke()     â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ [System +    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚  Human msg]  â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚â”€â”           â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚ â”‚ LLM      â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚ â”‚ Process  â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚ â”‚ (2-10s)  â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚â—„â”˜           â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚            â”‚
 â”‚             â”‚                 â”‚ Response     â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ (analysis)   â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Parse:    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Primary  â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Root     â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ - Recommendâ”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚             â”‚            â”‚
 â”‚             â”‚ analysis_result{}              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â”‚             â”‚            â”‚
 â”‚             â”‚ save_analysis_  â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚ report(results) â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Format    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Markdown  â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
 â”‚             â”‚                 â”‚              â”‚             â”‚ Write .md  â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â”‚             â”‚                 â”‚              â”‚             â”‚ Success    â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ Format    â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚ â”‚ JSON      â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
 â”‚             â”‚                 â”‚              â”‚             â”‚ Write .jsonâ”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â”‚             â”‚                 â”‚              â”‚             â”‚ Success    â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚             â”‚            â”‚
 â”‚             â”‚ Done            â”‚              â”‚             â”‚            â”‚
 â”‚             â”‚                 â”‚              â”‚             â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚              â”‚             â”‚            â”‚
 â”‚ Display results              â”‚              â”‚             â”‚            â”‚
 â”‚                              â”‚              â”‚             â”‚            â”‚
```

---

## ğŸ“ Multi-File Analysis Sequence

```
User          CLI           LogAnalyzer    FileSystem    LLM Provider   Output
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                 â”‚              â”‚              â”‚           â”‚
 â”‚ Analyze dir â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â”‚              â”‚           â”‚
 â”‚             â”‚ analyze_multipleâ”‚              â”‚              â”‚           â”‚
 â”‚             â”‚ _logs(dir, "*.log")            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â”‚           â”‚
 â”‚             â”‚                 â”‚ glob("*.log")â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚           â”‚
 â”‚             â”‚                 â”‚ [file1.log,  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚  file2.log,  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚  file3.log]  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Initialize â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ results{}  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚              â•”â•â•â•ªâ•â• LOOP: For Each File â•â•â•â•—  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚ Read file    â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚ Content      â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â”€â” Parse      â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â—„â”˜            â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚ Analyze fileâ•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚ Analysis    â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚              â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â”€â” Append to â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚ â”‚ results[]  â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•‘  â”‚â—„â”˜            â”‚              â•‘  â”‚           â”‚
 â”‚             â”‚              â•šâ•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Find      â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Common    â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Patterns  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ (Counter) â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â”€â”            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Generate  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Combined  â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚ â”‚ Report    â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â—„â”˜            â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
 â”‚             â”‚                 â”‚              â”‚              â”‚ Save reportâ”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚              â”‚           â”‚
 â”‚             â”‚ Complete        â”‚              â”‚              â”‚           â”‚
 â”‚             â”‚                 â”‚              â”‚              â”‚           â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚              â”‚              â”‚           â”‚
 â”‚ Done                         â”‚              â”‚              â”‚           â”‚
 â”‚                              â”‚              â”‚              â”‚           â”‚
```

---

## ğŸ” Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Error Handling Flow                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Initialize Stage:
    â”‚
    â”œâ”€â–º API Key Missing?
    â”‚   â””â”€â–º ValueError â†’ Exit(1) with message
    â”‚
    â”œâ”€â–º Invalid Provider?
    â”‚   â””â”€â–º ValueError â†’ Exit(1) with message
    â”‚
    â””â”€â–º Import Error (missing packages)?
        â””â”€â–º ImportError â†’ Exit(1) with install instructions

Parse Stage:
    â”‚
    â”œâ”€â–º File Not Found?
    â”‚   â””â”€â–º FileNotFoundError â†’ Raise exception â†’ Exit(1)
    â”‚
    â”œâ”€â–º Permission Denied?
    â”‚   â””â”€â–º PermissionError â†’ Raise exception â†’ Exit(1)
    â”‚
    â””â”€â–º Unicode Decode Error?
        â””â”€â–º Use errors='ignore' â†’ Continue

Analysis Stage:
    â”‚
    â”œâ”€â–º Connection Error (OpenAI)?
    â”‚   â”œâ”€â–º SSL Certificate Issue?
    â”‚   â”‚   â””â”€â–º Suggest: --no-ssl-verify
    â”‚   â”œâ”€â–º Network Timeout?
    â”‚   â”‚   â””â”€â–º Return error dict (not crash)
    â”‚   â””â”€â–º API Rate Limit?
    â”‚       â””â”€â–º Return error dict (not crash)
    â”‚
    â””â”€â–º Invalid API Key?
        â””â”€â–º Authentication Error â†’ Return error dict

Save Stage:
    â”‚
    â”œâ”€â–º Write Permission Denied?
    â”‚   â””â”€â–º IOError â†’ Print error â†’ Exit(1)
    â”‚
    â””â”€â–º Disk Full?
        â””â”€â–º IOError â†’ Print error â†’ Exit(1)

Final Catch:
    â”‚
    â””â”€â–º Any Unhandled Exception?
        â””â”€â–º Print traceback â†’ Exit(1)
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Key Resolution Flow                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Start: Need API Key
    â”‚
    â”œâ”€â–º Check: --api-key argument provided?
    â”‚   â”œâ”€â–º YES â†’ Use argument value â†’ Done âœ“
    â”‚   â””â”€â–º NO  â†’ Continue
    â”‚
    â”œâ”€â–º Check: Environment variable set?
    â”‚   â”‚
    â”‚   â”œâ”€â–º OpenAI Provider:
    â”‚   â”‚   â””â”€â–º Check: $OPENAI_API_KEY ?
    â”‚   â”‚       â”œâ”€â–º YES â†’ Use env value â†’ Done âœ“
    â”‚   â”‚       â””â”€â–º NO  â†’ Continue
    â”‚   â”‚
    â”‚   â”œâ”€â–º Mistral Provider:
    â”‚   â”‚   â””â”€â–º Check: $MISTRAL_API_KEY ?
    â”‚   â”‚       â”œâ”€â–º YES â†’ Use env value â†’ Done âœ“
    â”‚   â”‚       â””â”€â–º NO  â†’ Continue
    â”‚   â”‚
    â”‚   â””â”€â–º Azure Provider:
    â”‚       â””â”€â–º Check: $AZURE_OPENAI_API_KEY ?
    â”‚           â”œâ”€â–º YES â†’ Use env value â†’ Done âœ“
    â”‚           â””â”€â–º NO  â†’ Continue
    â”‚
    â””â”€â–º No API Key Found
        â””â”€â–º Raise ValueError â†’ Exit(1)
            â””â”€â–º Message: "API key required. Set environment variable."
```

---

## ğŸ§  LLM Interaction Details

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            LLM Request/Response Cycle                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[1] Prepare Messages:
    â”‚
    â”œâ”€â–º System Message:
    â”‚   "You are an expert log analyst..."
    â”‚   - Role definition
    â”‚   - Output structure requirements
    â”‚   - Analysis guidelines
    â”‚
    â””â”€â–º Human Message:
        - File metadata
        - Error statistics
        - Sample errors (top 10)
        - Stack traces (top 3)
        - Recent log content (5000 chars)

[2] Invoke LLM:
    â”‚
    â””â”€â–º llm.invoke(messages=[system, human])
        â”‚
        â”œâ”€â–º Model processes prompt
        â”‚   - Temperature: 0.3 (deterministic)
        â”‚   - Max tokens: 4000
        â”‚   - Provider-specific API call
        â”‚
        â””â”€â–º Return response object

[3] Extract Content:
    â”‚
    â”œâ”€â–º response.content (if available)
    â””â”€â–º str(response) (fallback)

[4] Parse Structured Response:
    â”‚
    â”œâ”€â–º Extract: Primary Failure Reason
    â”‚   Pattern: r'Primary Failure Reason[:\s]+(.*?)(?=\n\d\.|\n#|$)'
    â”‚
    â”œâ”€â–º Extract: Error Type Classification
    â”‚   Pattern: r'Error Type Classification[:\s]+(.*?)(?=\n\d\.|\n#|$)'
    â”‚
    â”œâ”€â–º Extract: Root Cause Analysis
    â”‚   Pattern: r'Root Cause Analysis[:\s]+(.*?)(?=\n\d\.|\n#|$)'
    â”‚
    â”œâ”€â–º Extract: Recommended Actions
    â”‚   Pattern: r'Recommended Actions[:\s]+(.*?)(?=\n\d\.|\n#|$)'
    â”‚
    â””â”€â–º Extract: Confidence Level
        Pattern: r'Confidence Level[:\s]+(.*?)(?=\n|$)'

[5] Return Structured Dict:
    {
        "timestamp": "2025-12-23T18:09:58",
        "provider": "openai",
        "model": "gpt-4o-mini",
        "file_analyzed": "log_710.txt",
        "full_analysis": "...",
        "primary_reason": "...",
        "error_type": "...",
        "root_cause": "...",
        "recommendations": "...",
        "confidence": "...",
        "log_stats": {...}
    }
```

---

## â±ï¸ Timing Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Typical Execution Timeline                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

For a ~200KB log file with ~2800 lines:

0.0s  â”œâ”€â–º Start
      â”‚
0.1s  â”œâ”€â–º Initialize LogAnalyzer
      â”‚   - Load dependencies
      â”‚   - Initialize LLM client
      â”‚   - Validate API key
      â”‚
0.5s  â”œâ”€â–º Parse Log File
      â”‚   - Read file (0.1s)
      â”‚   - Regex extraction (0.3s)
      â”‚   - Count & statistics (0.1s)
      â”‚
0.6s  â”œâ”€â–º Create Analysis Prompt
      â”‚   - Format log data
      â”‚   - Build structured prompt
      â”‚
5.0s  â”œâ”€â–º LLM Analysis â³ (Longest step)
      â”‚   - Network latency (0.5s)
      â”‚   - LLM processing (4.0s)
      â”‚   - Response parsing (0.5s)
      â”‚
5.1s  â”œâ”€â–º Save Markdown Report
      â”‚   - Format markdown
      â”‚   - Write to disk
      â”‚
5.2s  â”œâ”€â–º Save JSON Results
      â”‚   - Serialize to JSON
      â”‚   - Write to disk
      â”‚
5.2s  â””â”€â–º Complete âœ“

Total: ~5.2 seconds

Breakdown:
- Initialization: 2%    (0.1s)
- Parsing:       8%    (0.4s)
- LLM Analysis:  88%   (4.6s)
- Reporting:     2%    (0.1s)
```

---

## ğŸ¯ Decision Tree - Provider Selection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LLM Provider Selection Logic                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Start
  â”‚
  â”œâ”€â–º --provider flag specified?
  â”‚   â”œâ”€â–º YES â†’ Use specified provider
  â”‚   â””â”€â–º NO  â†’ Default to 'openai'
  â”‚
  â”œâ”€â–º Provider = 'openai'?
  â”‚   â”œâ”€â–º YES â†’ Initialize ChatOpenAI
  â”‚   â”‚   â”œâ”€â–º API Key available?
  â”‚   â”‚   â”‚   â”œâ”€â–º YES â†’ Success âœ“
  â”‚   â”‚   â”‚   â””â”€â–º NO  â†’ Error âœ—
  â”‚   â”‚   â””â”€â–º Model:
  â”‚   â”‚       â””â”€â–º Specified or default: 'gpt-4o-mini'
  â”‚   â”‚
  â”‚   â””â”€â–º NO â†’ Continue
  â”‚
  â”œâ”€â–º Provider = 'mistral'?
  â”‚   â”œâ”€â–º YES â†’ Initialize ChatMistralAI
  â”‚   â”‚   â”œâ”€â–º Package installed?
  â”‚   â”‚   â”‚   â”œâ”€â–º YES â†’ Continue
  â”‚   â”‚   â”‚   â””â”€â–º NO  â†’ ImportError âœ—
  â”‚   â”‚   â”œâ”€â–º API Key available?
  â”‚   â”‚   â”‚   â”œâ”€â–º YES â†’ Success âœ“
  â”‚   â”‚   â”‚   â””â”€â–º NO  â†’ Error âœ—
  â”‚   â”‚   â””â”€â–º Model:
  â”‚   â”‚       â””â”€â–º Specified or default: 'mistral-large-latest'
  â”‚   â”‚
  â”‚   â””â”€â–º NO â†’ Continue
  â”‚
  â”œâ”€â–º Provider = 'ollama'?
  â”‚   â”œâ”€â–º YES â†’ Initialize Ollama (local)
  â”‚   â”‚   â”œâ”€â–º Package installed?
  â”‚   â”‚   â”‚   â”œâ”€â–º YES â†’ Continue
  â”‚   â”‚   â”‚   â””â”€â–º NO  â†’ ImportError âœ—
  â”‚   â”‚   â”œâ”€â–º Base URL:
  â”‚   â”‚   â”‚   â””â”€â–º Specified or default: 'http://localhost:11434'
  â”‚   â”‚   â”œâ”€â–º Model:
  â”‚   â”‚   â”‚   â””â”€â–º Specified or default: 'llama2'
  â”‚   â”‚   â””â”€â–º Success âœ“ (No API key needed)
  â”‚   â”‚
  â”‚   â””â”€â–º NO â†’ Continue
  â”‚
  â””â”€â–º Provider = 'azure'?
      â”œâ”€â–º YES â†’ Initialize Azure OpenAI
      â”‚   â”œâ”€â–º API Key available?
      â”‚   â”‚   â”œâ”€â–º YES â†’ Continue
      â”‚   â”‚   â””â”€â–º NO  â†’ Error âœ—
      â”‚   â”œâ”€â–º Base URL specified?
      â”‚   â”‚   â”œâ”€â–º YES â†’ Success âœ“
      â”‚   â”‚   â””â”€â–º NO  â†’ Error âœ— (Required)
      â”‚   â””â”€â–º Model:
      â”‚       â””â”€â–º Specified or default: 'gpt-4'
      â”‚
      â””â”€â–º NO â†’ ValueError âœ— (Unsupported provider)
```

---

## ğŸ“Š Data Transformation Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Data Transformation Pipeline                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Raw Log File (Text)
    â”‚
    â”œâ”€â–º Read as string
    â”‚
    â–¼
Unstructured Text
    â”‚
    â”œâ”€â–º Apply Regex Patterns
    â”‚   â”œâ”€â–º ERROR[:\s]+(.*)
    â”‚   â”œâ”€â–º FATAL[:\s]+(.*)
    â”‚   â”œâ”€â–º CRITICAL[:\s]+(.*)
    â”‚   â”œâ”€â–º Exception[:\s]+(.*)
    â”‚   â””â”€â–º Traceback.*?
    â”‚
    â–¼
Extracted Matches (List[str])
    â”‚
    â”œâ”€â–º Count & Categorize
    â”‚   â””â”€â–º Counter(error_types)
    â”‚
    â–¼
Parsed Data Dict
    {
        "errors": [...],
        "warnings": [...],
        "stack_traces": [...],
        "error_types": {...},
        "statistics": {...}
    }
    â”‚
    â”œâ”€â–º Format as Prompt
    â”‚
    â–¼
LLM Prompt (String)
    â”‚
    â”œâ”€â–º Send to LLM
    â”‚
    â–¼
LLM Response (String)
    â”‚
    â”œâ”€â–º Parse Sections (Regex)
    â”‚
    â–¼
Analysis Dict
    {
        "primary_reason": "...",
        "error_type": "...",
        "root_cause": "...",
        "recommendations": "..."
    }
    â”‚
    â”œâ”€â–º Format as Markdown
    â”‚   â”œâ”€â–º Headers
    â”‚   â”œâ”€â–º Lists
    â”‚   â””â”€â–º Code blocks
    â”‚
    â–¼
Markdown Report (Text)
    â”‚
    â””â”€â–º Write to File

    â”‚
    â”œâ”€â–º Also: Serialize as JSON
    â”‚
    â–¼
JSON Results (Text)
    â”‚
    â””â”€â–º Write to File
```

---


