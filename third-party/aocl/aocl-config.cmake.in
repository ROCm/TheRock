# AOCL-BLAS CMake package configuration
# Provides AOCL::AOCL target for linking against AOCL-BLAS library
#
# This package provides BLIS/BLAS/CBLAS functions from AOCL 5.2.
# The library (libaocl.a) contains only the BLAS component of AOCL,
# built with ILP64 support for 64-bit integer indices.

# AOCL-BLAS is a static library built with ILP64 support
set(AOCL_FOUND TRUE)
set(AOCL_VERSION "5.2")

# Define the AOCL::AOCL imported target
# This provides BLIS/BLAS/CBLAS functions for CPU reference BLAS
if(NOT TARGET AOCL::AOCL)
  add_library(AOCL::AOCL STATIC IMPORTED)

  # Set the BLAS library location
  # Headers are in lib/host-math/include/aocl/ subdirectory (matching OpenBLAS pattern)
  set_target_properties(AOCL::AOCL PROPERTIES
    IMPORTED_LOCATION "${CMAKE_CURRENT_LIST_DIR}/../../../lib/libaocl.a"
    INTERFACE_INCLUDE_DIRECTORIES "${CMAKE_CURRENT_LIST_DIR}/../../../include/aocl"
  )

  # AOCL-BLAS is built with multithreading enabled and requires OpenMP.
  # AOCL's build system handles OpenMP discovery and linking internally,
  # but consumers may still need to link OpenMP if not already in their toolchain.
  find_package(OpenMP QUIET)
  if(OpenMP_CXX_FOUND)
    set_property(TARGET AOCL::AOCL APPEND PROPERTY
      INTERFACE_LINK_LIBRARIES OpenMP::OpenMP_CXX
    )
  endif()
endif()

# Legacy variables for compatibility
set(AOCL_LIBRARIES AOCL::AOCL)
set(AOCL_INCLUDE_DIRS "${CMAKE_CURRENT_LIST_DIR}/../../../include/aocl")
